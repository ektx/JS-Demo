<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Drag</title>
	<style>
		.drag {
			width: 200px;
			height: 120px;
			background: #f90;
			border: 1px solid #f60;
			position: fixed;
			top: 0;
			left: 0;
		}
		.drag  div {
			width: 100%;
			height: 100%;
			background-color: #09f;
		}
	</style>
</head>
<body>
<h1>lalalalalalal....</h1>
	<div class="drag">
		<div>
			<div>
				<div></div>
			</div>
		</div>
	</div>
	<div class="drag">2</div>
	<div class="drag">3</div>

<script>
var _root = document.documentElement;

var startPoint = {};
var zIndex = 1000;



_root.addEventListener('mousedown', function(e) {

	startPoint= {
		_: null
	}
console.log(e)
	


	if (e.target.className === 'drag') {

		startPoint = {
			_: e.target,
			x: e.pageX,
			y: e.pageY,
			top: !e.target.style.top ? 0 : parseFloat(e.target.style.top),
			left: !e.target.style.left ? 0 : parseFloat(e.target.style.left)
		}

		zIndex++;
		
		console.log(startPoint)
	}
		
}, false);

_root.addEventListener('mousemove', function(e) {
	
	if (e.buttons == 1) {

		var _this = startPoint._;

		if (!_this) return;
		e.preventDefault();

		_this.style.top = startPoint.top + e.pageY - startPoint.y + 'px';
		_this.style.left = startPoint.left + e.pageX - startPoint.x + 'px';
		_this.style.zIndex = zIndex;

		console.log(e.pageY - startPoint.y, e.pageX - startPoint.x)
	
		console.log(e.target.nodeName)
	}
}, false);


</script>
</body>
</html>