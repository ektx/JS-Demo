<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>倒计时效果</title>
</head>
<body>
	<output id="output"></output>
	<button onclick="run()">开始</button>
	<script>
		function waitTimeToDo({time = 0, step, cb}) {
			if (step) step(time)

			setTimeout(function() {
				time--

				if (time <= 0) {
					if (cb) cb()
				} else {
					if (step) step(time)
					waitTimeToDo({time, step, cb});
				}
			}, 1000)
		};

		function run () {
			waitTimeToDo({
				time: 3, 
				step (time) {
					output.value = time +'s !'
				}, 
				cb () {
					output.value = 'OK! time over!'
				}
			})
		}
	</script>
</body>
</html>